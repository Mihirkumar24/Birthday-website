<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Happy Birthday — A little world of love</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;900&family=Poppins:wght@300;500;700;900&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg1:#0b0410;
    --bg2:#361228;
    --accent1:#ff6b9f;
    --accent2:#ff9ab6;
    --gold:#ffd27f;
    --muted:rgba(255,255,255,0.66);
    --glass:rgba(255,255,255,0.03);
    --nav-h:74px;
    --maxw:1200px;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(140deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased;font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;color:#fff}
  body{min-height:100vh;display:flex;flex-direction:column;overflow:hidden}

  /* NAV */
  nav{height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;padding:12px 18px;gap:12px;z-index:40}
  .brand{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--gold));display:flex;align-items:center;justify-content:center;font-weight:900;color:#120407;box-shadow:0 18px 48px rgba(0,0,0,0.55)}
  .title{font-size:18px;font-weight:800}
  .subtitle{font-size:12px;color:var(--muted);margin-top:4px}

  .nav-actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .nav-btn{background:linear-gradient(90deg,var(--accent1),var(--gold));border:none;color:#120407;padding:10px 14px;border-radius:14px;font-weight:800;cursor:pointer;box-shadow:0 12px 36px rgba(0,0,0,0.4);font-family:'Poppins';font-size:15px}

  /* Canvas: allow vertical scroll on small screens so text never gets cropped */
  .canvas{
    width:100vw;height:calc(100vh - var(--nav-h));position:relative;overflow:auto;display:flex;align-items:center;justify-content:center;padding:26px 18px;
  }
  .bg-decor{position:absolute;inset:-20% -10%;pointer-events:none;z-index:0;background:
    radial-gradient(1000px 340px at 6% 14%, rgba(255,107,159,0.06), transparent 8%),
    radial-gradient(900px 320px at 92% 82%, rgba(255,210,127,0.02), transparent 10%);}

  /* Center container width control to avoid cropping while keeping large type */
  .center{
    z-index:6;
    width:100%;
    max-width:var(--maxw);
    padding:6vh 18px 8vh;
    box-sizing:border-box;
    text-align:center;
    margin:auto;
  }

  /* Heading (Playfair Display) — responsive, wraps nicely */
  .headline{
    font-family:'Playfair Display', serif;
    font-weight:900;
    font-size: clamp(34px, 8.5vw, 108px);
    line-height: clamp(1.0, 0.95, 1.02);
    margin:0 auto 12px;
    letter-spacing:-0.6px;
    color:transparent;
    -webkit-background-clip:text;background-clip:text;
    background-image: linear-gradient(90deg,var(--accent1),var(--accent2),var(--gold));
    text-wrap:balance; /* best-effort balancing */
    word-break:break-word;
    hyphens:auto;
    text-shadow:0 28px 64px rgba(255,107,159,0.10);
    display:block;
    /* ensure the headline is readable and not clipped:
       allow it to take up to 90% of viewport width and flow to next line */
    max-width:92%;
  }

  .subline{
    font-family:'Dancing Script',cursive;
    font-size: clamp(15px, 2.8vw, 22px);
    color:var(--muted);
    margin-top:12px;
  }

  .help{margin-top:34px;color:var(--muted);font-weight:600}

  /* Falling particles layer */
  .particles{position:absolute;inset:0;pointer-events:none;z-index:2;overflow:hidden}
  .heart{position:absolute;will-change:transform,opacity;filter:drop-shadow(0 8px 22px rgba(255,107,159,0.08));width:26px;height:26px}
  .star{position:absolute;width:10px;height:10px;will-change:transform,opacity,filter;filter:drop-shadow(0 8px 22px rgba(255,210,127,0.06));opacity:0.9}

  /* subtle shimmer for stars */
  @keyframes twinkle {
    0%{ transform: scale(0.9) rotate(0deg); opacity:0.75; filter:brightness(1); }
    50%{ transform: scale(1.4) rotate(18deg); opacity:1; filter:brightness(1.6); }
    100%{ transform: scale(0.9) rotate(0deg); opacity:0.75; filter:brightness(1); }
  }

  /* modal basics */
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.6));opacity:0;pointer-events:none;transition:opacity 220ms}
  .modal.show{opacity:1;pointer-events:auto}
  .modal-card{width:min(980px,94%);max-height:86vh;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.01));border-radius:14px;padding:16px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 90px rgba(0,0,0,0.6);backdrop-filter:blur(10px)}
  .modal-header{display:flex;justify-content:space-between;align-items:center}
  .modal-title{font-size:20px;font-weight:900}
  .modal-close{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 10px;border-radius:10px;color:var(--muted);cursor:pointer}

  .slides-stage{position:relative;background:rgba(0,0,0,0.12);border-radius:12px;min-height:420px;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(1.06);transition:opacity 900ms ease, transform 900ms ease}
  .slide.show{opacity:1;transform:scale(1)}
  .slide img{max-width:100%;max-height:100%;object-fit:cover;border-radius:8px}

  /* Responsive adjustments */
  @media (max-width:920px){
    .headline{font-size:clamp(28px, 10.8vw, 84px);max-width:96%}
    .center{padding:7vh 12px 9vh}
  }
  @media (max-width:600px){
    nav{padding:10px 12px}
    .logo{width:48px;height:48px}
    .nav-btn{padding:10px 12px;font-size:14px}
    .headline{font-size:clamp(22px, 14vw, 52px);line-height:1.06}
    .subline{font-size:16px}
    .center{padding:9vh 10px 11vh}
  }
  @media (max-width:400px){
    .headline{font-size:clamp(20px, 17vw, 44px)}
    .subline{font-size:15px}
  }
</style>
</head>
<body>

<nav>
  <div class="brand">
    <div class="logo">D</div>
    <div>
      <div class="title">Happy Birthday, Wifeyy!</div>
      <div class="subtitle">A small world of love, made for you!</div>
    </div>
  </div>

  <div class="nav-actions">
    <button id="loveBtn" class="nav-btn">Love Letter</button>
    <button id="photoBtn" class="nav-btn">PhotoBooth</button>
  </div>
</nav>

<div class="canvas" id="canvas">
  <div class="bg-decor" aria-hidden="true"></div>
  <div class="particles" id="particles"></div>

  <div class="center" role="main" aria-live="polite">
    <h1 class="headline" id="headline">You are my everything</h1>
    <div class="subline">Forever and always — with all my heart</div>
    <div class="help">Tap <strong>Love Letter</strong> for a little surprise!</div>
  </div>
</div>

<!-- PhotoBooth modal -->
<div class="modal" id="photoboothModal" aria-hidden="true" role="dialog">
  <div class="modal-card">
    <div class="modal-header">
      <div>
        <div class="modal-title">PhotoBooth</div>
        <div style="font-size:13px;color:var(--muted);margin-top:6px">A looping slideshow — defined in the code.</div>
      </div>
      <div><button class="modal-close" id="closePhoto">Close ✕</button></div>
    </div>

    <div class="slides-stage" id="slidesStage" aria-live="polite" style="margin-top:12px"></div>

    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button id="prevBtn" class="nav-btn" style="background:var(--glass);color:var(--muted)">Prev</button>
      <button id="playPauseBtn" class="nav-btn" style="background:linear-gradient(90deg,var(--accent1),var(--gold));color:#120407">Pause</button>
      <button id="nextBtn" class="nav-btn" style="background:var(--glass);color:var(--muted)">Next</button>
      <button id="shuffleBtn" class="nav-btn" style="background:var(--glass);color:var(--muted)">Shuffle</button>
    </div>
  </div>
</div>

<!-- Love Letter modal (kept) -->
<div class="modal" id="letterModal" role="dialog" aria-hidden="true" style="z-index:9998">
  <div class="modal-card">
    <div class="modal-header">
      <div>
        <div class="modal-title">A Letter For You</div>
        <div style="font-size:13px;color:var(--muted);margin-top:6px">Typed with a little magic — press Replay to see it again.</div>
      </div>
      <div><button class="modal-close" id="closeLetter">Close ✕</button></div>
    </div>

    <div style="margin-top:14px;background:linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);min-height:240px;overflow:auto">
      <div id="typedLetter" style="font-family:Georgia,serif;color:rgba(255,255,255,0.95);font-size:18px;line-height:1.8;white-space:pre-wrap"></div>
      <span id="letterCursor" style="display:none;width:10px;height:22px;background:linear-gradient(180deg,var(--accent1),var(--gold));margin-left:6px;vertical-align:middle;border-radius:4px;animation:blink 900ms steps(1) infinite"></span>
    </div>

    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
      <button id="replayLetter" style="padding:8px 12px;border-radius:10px;border:none;background:var(--glass);color:var(--text);font-weight:800">Replay</button>
      <button id="pauseLetter" style="padding:8px 12px;border-radius:10px;border:none;background:var(--glass);color:var(--text);font-weight:800">Pause</button>
    </div>
  </div>
</div>

<script>
/* ===== Particle system: hearts + stars (more dense on desktop, adaptive on mobile) ===== */
(function(){
  const container = document.getElementById('particles');
  const isMobile = window.matchMedia('(max-width:720px)').matches;

  // Particle settings
  const hearts = {
    colors: ['#ff6b9f','#ff9ab6','#ffd27f','#ffbfd6'],
    minSize: isMobile ? 8 : 14,
    maxSize: isMobile ? 26 : 46,
    minInterval: isMobile ? 360 : 180,
    maxInterval: isMobile ? 900 : 600
  };
  const stars = {
    colors: ['#ffd27f','#fff6d9','#fff2d1'],
    minSize: isMobile ? 6 : 8,
    maxSize: isMobile ? 10 : 14,
    minInterval: isMobile ? 150 : 80,
    maxInterval: isMobile ? 500 : 260
  };

  // Make a heart element and animate it falling
  function spawnHeart(){
    const el = document.createElement('div');
    el.className = 'heart';
    const size = Math.floor(Math.random()*(hearts.maxSize - hearts.minSize) + hearts.minSize);
    el.style.width = size + 'px';
    el.style.height = size + 'px';
    el.style.left = (Math.random()*100) + '%';
    el.style.top = '-10%';
    el.style.opacity = (Math.random()*0.5 + 0.35).toFixed(2);
    const rot = Math.floor(Math.random()*80 - 40);
    el.style.transform = `rotate(${rot}deg)`;
    const color = hearts.colors[Math.floor(Math.random()*hearts.colors.length)];
    el.innerHTML = `<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><path fill="${color}" d="M12 21s-7.61-4.998-10-8.5C-1.5 8.2 4.5 3 7.5 5.25 9.2 6.6 12 9.25 12 9.25s2.8-2.65 4.5-3.99C19.5 3 25.5 8.2 22 12.5 19.61 16.002 12 21 12 21z"/></svg>`;
    container.appendChild(el);

    const duration = Math.random()*(isMobile ? 4200 : 5200) + (isMobile ? 4200 : 5200);
    const driftX = (Math.random()*360 - 180);
    const endY = window.innerHeight * (isMobile ? 1.05 : 1.25);
    const anim = el.animate([
      { transform: `translate(0,0) rotate(${rot}deg)`, opacity: el.style.opacity },
      { transform: `translate(${driftX}px, ${endY}px) rotate(${rot + 40}deg)`, opacity: 0.06 }
    ], { duration, easing: 'cubic-bezier(.18,.9,.3,1)'});
    anim.onfinish = ()=> el.remove();
  }

  // Make a star sparkle and fall
  function spawnStar(){
    const el = document.createElement('div');
    el.className = 'star';
    const size = Math.floor(Math.random()*(stars.maxSize - stars.minSize) + stars.minSize);
    el.style.width = size + 'px';
    el.style.height = size + 'px';
    el.style.left = (Math.random()*100) + '%';
    el.style.top = '-6%';
    const color = stars.colors[Math.floor(Math.random()*stars.colors.length)];
    // simple star svg (diamond-like)
    el.innerHTML = `<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><path fill="${color}" d="M12 2l1.9 4.5L18.8 8l-4 3.2L15 16l-3-1.9L9 16l.2-4.8L5.2 8 10 6.5z"/></svg>`;
    container.appendChild(el);

    // twinkle while falling
    const driftX = (Math.random()*320 - 160);
    const duration = Math.random()*(isMobile ? 3800 : 2600) + (isMobile ? 2400 : 1800);
    el.animate([
      { transform: 'translate(0,0) scale(0.9)', opacity: 0.85, filter:'brightness(1)' },
      { transform: `translate(${driftX}px, ${window.innerHeight * (isMobile ? 0.9 : 1.05)}px) scale(1.4)`, opacity: 0.08, filter:'brightness(1.6)' }
    ], { duration, easing: 'cubic-bezier(.22,.9,.3,1)' }).onfinish = ()=> el.remove();

    // twinkle loop (visual only)
    el.animate([
      { transform: 'scale(0.9)', opacity:0.75 },
      { transform: 'scale(1.2)', opacity:1 },
      { transform: 'scale(0.95)', opacity:0.85 }
    ], { duration: 900 + Math.random()*700, iterations: Math.ceil(duration / 900) });
  }

  // spawn loops - hearts less frequently than stars
  function spawnLoop(){
    // spawn multiple stars per cycle for denser sparkle
    const starCount = isMobile ? 1 : Math.floor(Math.random()*3 + 2);
    for(let i=0;i<starCount;i++){
      setTimeout(spawnStar, Math.random()*120);
    }
    // hearts
    if(Math.random() > 0.35) spawnHeart();
    setTimeout(spawnLoop, Math.random()*(hearts.maxInterval - hearts.minInterval) + hearts.minInterval);
  }

  spawnLoop();
})();

/* ===== Heading animation (looping messages) ===== */
(function(){
  const el = document.getElementById('headline');
  const messages = [
    "HAPPY BIRTHDAY, CRUSH",
    "HAPPY BIRTHDAY, DHANYAA",
    "HAPPY BIRTHDAY, MY LOVE",
    "MAY YOUR DAY WILL BE FULL OF JOY",
    
    "Forever and always — with all my heart",
    "I LOVE YOU SO MUCH, MY DARLING!"
  ];
  let idx=0;
  function show(i){
    el.style.opacity = 0;
    setTimeout(()=> {
      el.textContent = messages[i];
      el.style.opacity = 1;
    }, 10);
  }
  show(0);
  setInterval(()=> { idx=(idx+1)%messages.length; show(idx); }, 3600);
})();

/* ===== PhotoBooth (uses uploaded image path) ===== */
const PHOTOS = [
  'images/DSC01931.JPG',
  'images/DSC01926.JPG',
  'images/DSC01932.JPG',
  'images/DSC01933.JPG',
  'images/DSC01970.JPG'
];

(function(){
  const photoBtn = document.getElementById('photoBtn');
  const photomodal = document.getElementById('photoboothModal');
  const closePhoto = document.getElementById('closePhoto');
  const slidesStage = document.getElementById('slidesStage');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const shuffleBtn = document.getElementById('shuffleBtn');

  let slides=[], idx=0, timer=null, playing=true, SLIDE_DURATION=3800;

  function build(){
    slidesStage.innerHTML='';
    slides = PHOTOS.map((src,i)=>({src,i}));
    if(!slides.length){ slidesStage.innerHTML = '<div style="padding:24px;color:var(--muted);font-weight:800">No photos defined</div>'; return; }
    slides.forEach((s,i)=>{
      const wrap=document.createElement('div');wrap.className='slide';
      const img=document.createElement('img');img.src=s.src;img.alt='Photo '+(i+1);
      img.onerror = ()=> img.src = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="#2b1722"/><text x="50%" y="50%" fill="#fff" font-size="22" text-anchor="middle">Image not found</text></svg>');
      wrap.appendChild(img);
      const cap=document.createElement('div');cap.className='caption';cap.textContent=(s.src||'').split('/').pop();
      wrap.appendChild(cap);
      slidesStage.appendChild(wrap);
    });
    show(0,true);
  }

  function show(i,instant=false){
    const els = Array.from(slidesStage.querySelectorAll('.slide'));
    if(!els.length) return;
    if(i<0) i=els.length-1; if(i>=els.length) i=0;
    idx=i;
    els.forEach((el,j)=> {
      el.classList.toggle('show', j===i);
      const img=el.querySelector('img');
      if(j===i && img){
        img.style.transition = `transform ${SLIDE_DURATION-200}ms ease-in-out`;
        const tx = (Math.random()*16 - 8);
        const ty = (Math.random()*10 - 5);
        img.style.transform = `scale(1.02) translate(${tx}px, ${ty}px)`;
        img.style.opacity='1';
      } else if(img){ img.style.transform='scale(1)'; img.style.opacity='0'; }
    });
    if(!instant && playing){ restart(); }
  }

  function start(){ if(timer) clearInterval(timer); playing=true; playPauseBtn.textContent='Pause'; timer=setInterval(()=>{ idx=(idx+1)%slides.length; show(idx); }, SLIDE_DURATION); }
  function stop(){ if(timer) clearInterval(timer); timer=null; playing=false; playPauseBtn.textContent='Play'; }
  function restart(){ stop(); start(); }

  photoBtn.addEventListener('click', ()=>{ build(); photomodal.classList.add('show'); photomodal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; if(slides.length) start(); });
  closePhoto.addEventListener('click', ()=>{ photomodal.classList.remove('show'); photomodal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; stop(); });
  prevBtn?.addEventListener('click', ()=>{ show(idx-1); if(playing) restart(); });
  nextBtn?.addEventListener('click', ()=>{ show(idx+1); if(playing) restart(); });
  playPauseBtn?.addEventListener('click', ()=>{ if(playing) stop(); else start(); });
  shuffleBtn?.addEventListener('click', ()=>{ for(let i=slides.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [slides[i],slides[j]]=[slides[j],slides[i]]; } PHOTOS.length=0; slides.forEach(s=>PHOTOS.push(s.src)); build(); show(0); if(playing) restart(); });

  // touch support
  (function(){
    let sx=0, dx=0;
    slidesStage.addEventListener('touchstart', e=>{ sx=e.touches[0].clientX; }, {passive:true});
    slidesStage.addEventListener('touchmove', e=>{ dx = e.touches[0].clientX - sx; }, {passive:true});
    slidesStage.addEventListener('touchend', ()=>{ if(Math.abs(dx)>60){ if(dx>0) prevBtn.click(); else nextBtn.click(); } dx=0; }, {passive:true});
  })();

})();

/* ===== Love letter modal & typing ===== */
(function(){
  const loveBtn = document.getElementById('loveBtn');
  const letterModal = document.getElementById('letterModal');
  const closeLetter = document.getElementById('closeLetter');
  const typedLetter = document.getElementById('typedLetter');
  const letterCursor = document.getElementById('letterCursor');
  const replayLetter = document.getElementById('replayLetter');
  const pauseLetter = document.getElementById('pauseLetter');

  const lines = [
    "My dearest,",
    "",
    "On this special morning I woke thinking how lucky I am to have you. Your smile turns everyday moments into stories I want to keep forever.",
    "",
    "You have a quiet strength that calms me and a laugh that colors my days brighter than sunrise. Today I promise to make you feel as treasured as you make me feel.",
    "",
    "May the candles glow for every wish you keep; may laughter find you at every turn.",
    "",
    "Always yours,",
    "— Mihir"
  ];

  let t=null, li=0, ci=0, paused=false, SPEED=100;

  function open(){ letterModal.classList.add('show'); letterModal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; start(true); }
  function close(){ letterModal.classList.remove('show'); letterModal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; stop(); typedLetter.textContent=''; letterCursor.style.display='none'; }

  function start(reset=true){
    stop();
    if(reset){ typedLetter.textContent=''; li=0; ci=0; }
    paused=false; letterCursor.style.display='inline-block';
    t = setInterval(()=> {
      if(paused) return;
      const line = lines[li] || '';
      if(ci < line.length){ typedLetter.textContent += line[ci]; ci++; }
      else { typedLetter.textContent += "\n"; li++; ci=0; }
      if(li >= lines.length){ stop(); letterCursor.style.display='none'; }
      typedLetter.parentElement.scrollTop = typedLetter.parentElement.scrollHeight;
    }, SPEED);
  }
  function stop(){ if(t) clearInterval(t); t=null; }

  loveBtn.addEventListener('click', open);
  closeLetter.addEventListener('click', close);
  replayLetter.addEventListener('click', ()=> start(true));
  pauseLetter.addEventListener('click', ()=> { paused = !paused; pauseLetter.textContent = paused ? 'Resume' : 'Pause'; });
  letterModal.addEventListener('click', (e)=> { if(e.target === letterModal) close(); });

})();

/* accessibility: escape closes modals */
document.addEventListener('keydown', (e)=> { if(e.key==='Escape'){ document.querySelectorAll('.modal.show').forEach(m=>{ m.classList.remove('show'); m.setAttribute('aria-hidden','true'); }); document.body.style.overflow=''; } });

</script>
</body>
</html>
